{"version":3,"file":"youtube.player.service.js","sourceRoot":"","sources":["../src/youtube.player.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAEnD,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAI1D,IAAM,SAAS,GAAG,cAAM,OAAA,MAAM,EAAN,CAAM,CAAC;;;IAQ9B,8BACS,IAAY,EACZ,UAA6B;QAD7B,SAAI,GAAJ,IAAI,CAAQ;QACZ,eAAU,GAAV,UAAU,CAAmB;QAErC,IAAI,CAAC,OAAO,GAAG,SAAS,EAAE,CAAC;KAC3B;IAED,yCAAU,GAAV,UAAW,MAAoB;QAA/B,iBAMC;QALA,EAAE,CAAA,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,cAAM,OAAA,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAtB,CAAsB,CAAC,EAA3C,CAA2C,CAAC,CAAC;SACxF;QAAC,IAAI,CAAC,CAAC;YACP,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,cAAM,OAAA,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAAtB,CAAsB,CAAC,CAAC;SAC5C;KACD;IAEO,wCAAS,GAAjB,UAAkB,MAAoB;QACrC,MAAM,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,SAAS,EAAE;YACvE,KAAK,EAAE,MAAM,CAAC,KAAK;YACnB,MAAM,EAAE,MAAM,CAAC,MAAM;YACrB,OAAO,EAAE,MAAM,CAAC,OAAO;YACvB,UAAU,EAAE,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE;YACpE,MAAM,EAAE;gBACR,OAAO,EAAE,UAAC,KAAU;oBACnB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;iBACnC;gBACD,aAAa,EAAE,UAAC,KAAU;oBACzB,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;iBAC7B;aACA;SACD,CAAC,CAAC;KACH;;gBApCD,UAAU;;;;gBARU,MAAM;gBAElB,iBAAiB;;+BAF1B;;SASa,oBAAoB","sourcesContent":["import { Injectable, NgZone } from '@angular/core';\n\nimport { YoutubeApiService } from \"./youtube.api.service\";\n\nimport { PlayerConfig } from './youtube.interface';\n\nconst getWindow = () => window;\n\n@Injectable()\nexport class YoutubePlayerService {\n\n\tprivate _window: any;\n\tprivate player: YT.Player;\n\n\tconstructor(\n\t\tprivate zone: NgZone,\n\t\tprivate youtubeApi: YoutubeApiService,\n\t) {\n\t\tthis._window = getWindow();\n\t}\n\t\n\tinitialise(config: PlayerConfig): void {\n\t\tif(this._window[\"YT\"] === undefined) {\n\t\t\tthis.youtubeApi.apiEmitter.subscribe(() => this.zone.run(() => this.newPlayer(config)));\n\t\t} else {\n\t\t\tthis.zone.run(() => this.newPlayer(config));\n\t\t}\n\t}\n\n\tprivate newPlayer(config: PlayerConfig): YT.Player {\n\t\treturn this.player = new this._window[\"YT\"][\"Player\"](config.elementId, {\n\t\t\twidth: config.width,\n\t\t\theight: config.height,\n\t\t\tvideoId: config.videoId,\n\t\t\tplayerVars: { autoplay: config.autoplay, controls: config.controls },\n\t\t\tevents: {\n\t\t\tonReady: (event: any) => {\n\t\t\t\tconfig.outputs.ready(event.target);\n\t\t\t},\n\t\t\tonStateChange: (event: any) => {\n\t\t\t\tconfig.outputs.change(event);\n\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n}\n"]}